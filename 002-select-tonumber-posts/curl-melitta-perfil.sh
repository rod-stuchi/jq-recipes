#! /bin/bash

curl -s 'http://localhost:4000/v1/graph' \
  -H 'Connection: keep-alive' \
  -H 'sec-ch-ua: ";Not A Brand";v="99", "Chromium";v="94"' \
  -H 'accept: */*' \
  -H 'content-type: application/json' \
  -H 'Authorization: 8661d***********************************************************' \
  -H 'sec-ch-ua-mobile: ?0' \
  -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.54 Safari/537.36' \
  -H 'sec-ch-ua-platform: "Linux"' \
  -H 'Origin: http://melitta.localhost:5000' \
  -H 'Sec-Fetch-Site: cross-site' \
  -H 'Sec-Fetch-Mode: cors' \
  -H 'Sec-Fetch-Dest: empty' \
  -H 'Referer: http://melitta.localhost:5000/' \
  -H 'Accept-Language: en-US,en;q=0.9,pt;q=0.8' \
  --data-raw $'{"operationName":"FetchAuthoredPosts","variables":{"authorId":"2769"},"query":"query FetchAuthoredPosts($authorId: ID\u0021, $after: String, $first: Int) {\\n  persona(author: $authorId) {\\n    id\\n    __typename\\n    name\\n    avatar {\\n      url\\n      __typename\\n    }\\n  }\\n  posts(author: $authorId, first: $first, after: $after) {\\n    edges {\\n      cursor\\n      node {\\n        id\\n        message\\n        isLikeable: likeable\\n        isCommentable: commentable\\n        isShareable: shareable\\n        shareableUrl\\n        publicLink\\n        group {\\n          id\\n          name\\n          description\\n          photo\\n          countMembers\\n          format\\n          __typename\\n        }\\n        permalink {\\n          permalink\\n          resourceType\\n          __typename\\n        }\\n        date\\n        author {\\n          type: __typename\\n          __typename\\n          id\\n          name\\n          avatar {\\n            url\\n            __typename\\n          }\\n          ... on Me {\\n            biography\\n            city\\n            company_site: site\\n            custom1\\n            custom2\\n            custom3\\n            custom4\\n            custom5\\n            mask\\n            department\\n            groups\\n            hierarchyGroup\\n            jobDescription\\n            memberSince\\n            name\\n            professionalHistory\\n            state\\n            __typename\\n          }\\n          ... on Employee {\\n            type: __typename\\n            __typename\\n            jobDescription\\n            hierarchyGroup\\n            memberSince\\n            mask\\n            company_site: site\\n          }\\n          ... on Brand {\\n            name\\n            __typename\\n          }\\n        }\\n        attachment {\\n          type: __typename\\n          ... on Picture {\\n            id\\n            url\\n            contentType\\n            width\\n            height\\n            thumbnail(width: 750, height: 750) {\\n              url\\n              contentType\\n              width\\n              height\\n              __typename\\n            }\\n            __typename\\n          }\\n          ... on Video {\\n            id\\n            url\\n            thumbnail(width: 750, height: 750) {\\n              url\\n              __typename\\n            }\\n            __typename\\n          }\\n          ... on Youtube {\\n            id\\n            __typename\\n          }\\n          ... on Vimeo {\\n            detailsUrl\\n            videoUrl\\n            chatUrl\\n            thumbnail(width: 750, height: 750) {\\n              url\\n              __typename\\n            }\\n            __typename\\n          }\\n          ... on OpenGraphObject {\\n            objectType\\n            url\\n            title\\n            image {\\n              url\\n              contentType\\n              width\\n              height\\n              __typename\\n            }\\n            __typename\\n          }\\n        }\\n        document {\\n          name\\n          extension: normalizedExtension\\n          url\\n          __typename\\n        }\\n        images {\\n          color\\n          id\\n          height\\n          urlPredominant\\n          url\\n          zoomUrl\\n          width\\n          __typename\\n        }\\n        commentsCount\\n        likedByMe\\n        likesCount\\n        reactions\\n        myLike {\\n          reaction\\n          __typename\\n        }\\n        repost {\\n          id\\n          message\\n          isLikeable: likeable\\n          isCommentable: commentable\\n          isShareable: shareable\\n          importance\\n          shareableUrl\\n          publicLink\\n          permalink {\\n            permalink\\n            resourceType\\n            __typename\\n          }\\n          date\\n          groupTags {\\n            id\\n            name\\n            __typename\\n          }\\n          groupItemTags {\\n            id\\n            name\\n            __typename\\n          }\\n          tags {\\n            id\\n            name\\n            __typename\\n          }\\n          author {\\n            type: __typename\\n            __typename\\n            id\\n            avatar {\\n              url\\n              __typename\\n            }\\n            ... on Employee {\\n              type: __typename\\n              __typename\\n              name\\n              department\\n              hierarchyGroup\\n              jobDescription\\n              memberSince\\n              company_site: site\\n              groups\\n              custom1\\n            }\\n            ... on Brand {\\n              name\\n              __typename\\n            }\\n          }\\n          document {\\n            name\\n            url\\n            extension: normalizedExtension\\n            __typename\\n          }\\n          attachment {\\n            type: __typename\\n            ... on Picture {\\n              id\\n              url\\n              contentType\\n              width\\n              height\\n              thumbnail(width: 750, height: 750) {\\n                url\\n                contentType\\n                width\\n                height\\n                __typename\\n              }\\n              __typename\\n            }\\n            ... on Video {\\n              id\\n              url\\n              thumbnail(width: 750, height: 750) {\\n                url\\n                __typename\\n              }\\n              __typename\\n            }\\n            ... on Youtube {\\n              id\\n              __typename\\n            }\\n            ... on Vimeo {\\n              detailsUrl\\n              videoUrl\\n              chatUrl\\n              thumbnail(width: 750, height: 750) {\\n                url\\n                __typename\\n              }\\n              __typename\\n            }\\n            ... on OpenGraphObject {\\n              objectType\\n              url\\n              title\\n              image {\\n                url\\n                contentType\\n                width\\n                height\\n                __typename\\n              }\\n              __typename\\n            }\\n          }\\n          commentsCount\\n          likedByMe\\n          likesCount\\n          reactions\\n          images {\\n            color\\n            id\\n            height\\n            urlPredominant\\n            url\\n            zoomUrl\\n            width\\n            __typename\\n          }\\n          myLike {\\n            reaction\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    pageInfo {\\n      hasNextPage\\n      endCursor\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n"}' \
  --compressed | jq '.data | .posts | .edges[] | .node | {id, message} | select(.id | tonumber > 230)'
