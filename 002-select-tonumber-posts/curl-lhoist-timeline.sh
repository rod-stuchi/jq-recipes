#! /bin/bash

curl -s 'http://localhost:4000/v1/graph' \
   -X POST \
   -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:92.0) Gecko/20100101 Firefox/92.0' \
   -H 'Accept: */*' \
   -H 'Accept-Language: en-US,en;q=0.5' \
   -H 'Referer: http://lhoist.localhost:5000/' \
   -H 'content-type: application/json' \
   -H 'Authorization: a1f87***********************************************************' \
   -H 'Origin: http://lhoist.localhost:5000' \
   -H 'Connection: keep-alive' \
   -H 'Sec-Fetch-Dest: empty' \
   -H 'Sec-Fetch-Mode: cors' \
   -H 'Sec-Fetch-Site: cross-site' \
   -H 'Pragma: no-cache' \
   -H 'Cache-Control: no-cache' \
   --data-raw '{"operationName":"FetchTimeline","variables":{"after":"892,891,890,889,888,887,885,884,883,882,904,903,901,900,899,898,897,895,894,893,905,906,907,908,909,910,911,912,915,916,917,920,921,918,922,923,924,925,928,929","first":10,"filter":{"contentText":""}},"query":"query FetchTimeline($after: String, $first: Int, $filter: TimelineFilter) {\n  timeline(after: $after, first: $first, filter: $filter) {\n    edges {\n      cursor\n      node {\n        fixed\n        id\n        message\n        isLikeable: likeable\n        isCommentable: commentable\n        isShareable: shareable\n        importance\n        shareableUrl\n        publicLink\n        group {\n          id\n          name\n          description\n          photo\n          countMembers\n          format\n          __typename\n        }\n        permalink {\n          permalink\n          resourceType\n          __typename\n        }\n        date\n        groupTags {\n          id\n          name\n          __typename\n        }\n        groupItemTags {\n          id\n          name\n          __typename\n        }\n        tags {\n          id\n          name\n          __typename\n        }\n        author {\n          type: __typename\n          __typename\n          id\n          name\n          ... on Me {\n            biography\n            city\n            company_site: site\n            custom1\n            custom2\n            custom3\n            custom4\n            custom5\n            mask\n            department\n            groups\n            hierarchyGroup\n            jobDescription\n            memberSince\n            name\n            professionalHistory\n            state\n            __typename\n          }\n          avatar {\n            url\n            __typename\n          }\n          ... on Employee {\n            id\n            type: __typename\n            __typename\n            biography\n            city\n            company_site: site\n            custom1\n            custom2\n            custom3\n            custom4\n            custom5\n            mask\n            department\n            groups\n            hierarchyGroup\n            jobDescription\n            memberSince\n            name\n            professionalHistory\n            state\n          }\n          ... on Brand {\n            name\n            __typename\n          }\n        }\n        document {\n          name\n          url\n          extension: normalizedExtension\n          __typename\n        }\n        attachment {\n          type: __typename\n          ... on Picture {\n            id\n            url\n            contentType\n            width\n            height\n            thumbnail(width: 750, height: 750) {\n              url\n              contentType\n              width\n              height\n              __typename\n            }\n            __typename\n          }\n          ... on Video {\n            id\n            url\n            thumbnail(width: 750, height: 750) {\n              url\n              __typename\n            }\n            __typename\n          }\n          ... on Youtube {\n            id\n            __typename\n          }\n          ... on Vimeo {\n            videoUrl\n            chatUrl\n            detailsUrl\n            thumbnail(width: 900, height: 600) {\n              url\n              __typename\n            }\n            __typename\n          }\n          ... on OpenGraphObject {\n            objectType\n            url\n            title\n            image {\n              url\n              contentType\n              width\n              height\n              __typename\n            }\n            __typename\n          }\n        }\n        commentsCount\n        likedByMe\n        likesCount\n        reactions\n        images {\n          color\n          id\n          height\n          urlPredominant\n          url\n          zoomUrl\n          width\n          __typename\n        }\n        myLike {\n          reaction\n          __typename\n        }\n        repost {\n          id\n          message\n          isLikeable: likeable\n          isCommentable: commentable\n          isShareable: shareable\n          importance\n          shareableUrl\n          publicLink\n          permalink {\n            permalink\n            resourceType\n            __typename\n          }\n          date\n          groupTags {\n            id\n            name\n            __typename\n          }\n          groupItemTags {\n            id\n            name\n            __typename\n          }\n          tags {\n            id\n            name\n            __typename\n          }\n          author {\n            __typename\n            type: __typename\n            id\n            avatar {\n              url\n              __typename\n            }\n            ... on Employee {\n              __typename\n              id\n              name\n              department\n              hierarchyGroup\n              jobDescription\n              memberSince\n              company_site: site\n              groups\n              custom1\n            }\n            ... on Brand {\n              name\n              __typename\n            }\n          }\n          document {\n            name\n            url\n            extension: normalizedExtension\n            __typename\n          }\n          attachment {\n            type: __typename\n            ... on Picture {\n              id\n              url\n              contentType\n              width\n              height\n              thumbnail(width: 750, height: 750) {\n                url\n                contentType\n                width\n                height\n                __typename\n              }\n              __typename\n            }\n            ... on Video {\n              id\n              url\n              thumbnail(width: 750, height: 750) {\n                url\n                __typename\n              }\n              __typename\n            }\n            ... on Youtube {\n              id\n              __typename\n            }\n            ... on Vimeo {\n              detailsUrl\n              videoUrl\n              chatUrl\n              thumbnail(width: 750, height: 750) {\n                url\n                __typename\n              }\n              __typename\n            }\n            ... on OpenGraphObject {\n              objectType\n              url\n              title\n              image {\n                url\n                contentType\n                width\n                height\n                __typename\n              }\n              __typename\n            }\n          }\n          commentsCount\n          likedByMe\n          likesCount\n          reactions\n          images {\n            color\n            id\n            height\n            urlPredominant\n            url\n            zoomUrl\n            width\n            __typename\n          }\n          myLike {\n            reaction\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasPreviousPage\n      endCursor\n      hasNextPage\n      startCursor\n      __typename\n    }\n    __typename\n  }\n}\n"}' \
    | jq '.data'

